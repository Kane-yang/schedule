[toc]

### 4S店进出门模块接口

#### 异常提醒设置
##### 获取异常类型列表接口
```
/v5/vehicle_entrance/get_error_type_list
参数
{
	"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTMwMTk0MDkxLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTMwMTUwODkxLCJzaWQiOiIxNTMwMTUwODkxNzE3OTE1MDAzIn0.KXAsmDaONiiRO0L69LGppf2RQJU90qfytR9AmsOA8DA"
}
返回
{
    "code": 0,
    "data": [
        {
            "Id": 1,
            "ErrType": 1,
            "Status": 0,
            "CreateTime": "2018-06-22 00:00:01",
            "ErrName": "手动出门"
        },
        {
            "Id": 2,
            "ErrType": 2,
            "Status": 0,
            "CreateTime": "2018-06-22 00:00:01",
            "ErrName": "滞留车"
        },
        {
            "Id": 3,
            "ErrType": 3,
            "Status": 0,
            "CreateTime": "2018-06-22 00:00:01",
            "ErrName": "非工作时间出车"
        },
        {
            "Id": 4,
            "ErrType": 4,
            "Status": 0,
            "CreateTime": "2018-06-22 00:00:01",
            "ErrName": "过夜未回厂"
        },
        {
            "Id": 5,
            "ErrType": 5,
            "Status": 0,
            "CreateTime": "2018-06-22 00:00:01",
            "ErrName": "疑似返修"
        }
    ]
}
```
##### 获取今日异常总数
```
v5/vehicle_entrance/get_today_error_num
参数
{	"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTMwMTE3NjkwLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTMwMDc0NDkwLCJzaWQiOiIxNTMwMDc0NDkwMzQ3MTIwMTA4In0.cnA_zroV50aTqhi5lS3QnyRXjpGwP-_ofoF9g5KOUZ8",
    "sid":"7"
}
返回
{
    "code": 0,
    "data": {
        "Total": 5,
        "HandOpenNum": 1,
        "DetainedCarNum": 0,
        "NotWorkTimeOutNum": 0,
        "NotComeBackNum": 0,
        "RepairNum": 4
    }
}

```

##### 获取异常列表
```
/v5/vehicle_entrance/get_error_list
参数
{
	"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTMwMTE3NjkwLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTMwMDc0NDkwLCJzaWQiOiIxNTMwMDc0NDkwMzQ3MTIwMTA4In0.cnA_zroV50aTqhi5lS3QnyRXjpGwP-_ofoF9g5KOUZ8",
    "sid":"7",
    "type": "5",
    "start": "0",
    "num": "10",
	"day_start": "",
	"day_end": ""
}
返回
{
    "code": 0,
    "data": {
        "Total": 8,
        "HandOpenNum": 2,
        "DetainedCarNum": 1,
        "NotWorkTimeOutNum": 3,
        "NotComeBackNum": 1,
        "RepairNum": 1,
        "EntranceRecordList": [
            {
                "Id": 1,
                "ShopId": 7,
                "DeviceId": 1,
                "Pos": "",
                "Type": 1,
                "CarNo": "浙S111114",
                "Image": "",
                "UserType": 2,
                "CarType": "员工开闸",
                "OrderId": 0,
                "MarkLeft": 1,
                "Forbid": 0,
                "Desc": "",
                "CreateTime": "2018-06-26 03:07:17",
                "ParkingFee": 0,
                "ParkingTime": 0,
                "InTime": "",
                "InEntranceId": 0,
                "OutTime": "",
                "OutEntranceId": 0,
                "ForbidMask": 0,
                "DeviceName": "",
                "VerifyUserName": "",
                "Tag": ""
            }
        ]
    }
}
```


##### 获取异常设置数据
```
/v5/vehicle_entrance/get_error_setting
参数
{
	 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI5OTQxMzI4LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI5ODk4MTI4LCJzaWQiOiIxNTI5ODk4MTI4NTYyNTE1NjA3In0.M3XX-87CVNCB48GyXAFg7RTfC3no4ElmAlTTGj3PFzI",
    "sid":"7"
}
返回
{
    "code": 0,
    "data": {
        "EList": [
            {
                "Id": 3,
                "ShopId": 7,
                "ErrorTypeId": 1,
                "Status": 1,
                "CreateTime": "2018-06-25 19:18:29"
            },
            {
                "Id": 4,
                "ShopId": 7,
                "ErrorTypeId": 2,
                "Status": 1,
                "CreateTime": "2018-06-25 19:18:30"
            },
            {
                "Id": 5,
                "ShopId": 7,
                "ErrorTypeId": 3,
                "Status": 1,
                "CreateTime": "2018-06-25 19:18:30"
            },
            {
                "Id": 6,
                "ShopId": 7,
                "ErrorTypeId": 4,
                "Status": 1,
                "CreateTime": "2018-06-25 19:18:30"
            },
            {
                "Id": 7,
                "ShopId": 7,
                "ErrorTypeId": 5,
                "Status": 1,
                "CreateTime": "2018-06-25 19:18:30"
            }
        ],
        "ParkingTimeValue": 10,
        "ParkingCarTypes": "9|13|14",
        "OverNightCarTypes": "13|14",
        "NotWorkOutCarTypes": "-1|9|13|14"
    }
}
```

##### 设置滞留时间
```
v5/vehicle_entrance/set_parking_error_time
参数
{
	 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI5OTQxMzI4LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI5ODk4MTI4LCJzaWQiOiIxNTI5ODk4MTI4NTYyNTE1NjA3In0.M3XX-87CVNCB48GyXAFg7RTfC3no4ElmAlTTGj3PFzI",
    "sid":"8",
    "hours": "2"
}
返回
{
    "code": 0,
    "data": "OK"
}
```

##### 设置异常监控的开启关闭

```
/v5/vehicle_entrance/switch_monitor_error
参数
{
	 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI5OTQxMzI4LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI5ODk4MTI4LCJzaWQiOiIxNTI5ODk4MTI4NTYyNTE1NjA3In0.M3XX-87CVNCB48GyXAFg7RTfC3no4ElmAlTTGj3PFzI",
    "sid":"8",
    "err_type": "2",  //异常类型 1：手动出门 2：滞留车 3：非工作时间出车  4：过夜未回厂  5：疑似返修
    "open": "1"       //是否开启 1：开启  0：关闭
}
返回
{
    "code": 0,
    "data": "OK"
}
```

##### 设置异常监控白名单
```
/v5/vehicle_entrance/set_error_white_list
参数
{
	 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI5OTQxMzI4LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI5ODk4MTI4LCJzaWQiOiIxNTI5ODk4MTI4NTYyNTE1NjA3In0.M3XX-87CVNCB48GyXAFg7RTfC3no4ElmAlTTGj3PFzI",
    "sid":"8",
    "err_type": "1",
    "car_types": "1|3"
}
返回
{
    "code": 0,
    "data": "OK"
}
```

#### 数据概览
##### 是否有维修车间
```
v5/vehicle_entrance/get_has_repair_room
参数
{
	 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI5OTQxMzI4LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI5ODk4MTI4LCJzaWQiOiIxNTI5ODk4MTI4NTYyNTE1NjA3In0.M3XX-87CVNCB48GyXAFg7RTfC3no4ElmAlTTGj3PFzI",
    "sid":"7"
}
返回
{
    "code": 0,
    "data": {
        "HasRepairRoom": 1   //1:有维修间   0：无维修间
    }
}
```

##### 当前店内车辆接口
```
/v5/vehicle_entrance/get_car_in_shop_num
参数
{
	 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI5Njc3NDE2LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI5NjM0MjE2LCJzaWQiOiIxNTI5NjM0MjE2MDE2OTgwODc1In0.P13BsFxCRxNyG_LTIjPRpRVjw1V_LiiEDgOUrP4FgsI",
    "sid":"7"
}
返回
{
    "code": 0,
    "data": {
        "Total": 2,
        "RepairNum": 0,
        "OtherNum": 2
    }
}
```


##### 进出店铺车次
```
/v5/vehicle_entrance/get_entrance_num
参数
{
	 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI5ODY1Njc0LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI5ODIyNDc0LCJzaWQiOiIxNTI5ODIyNDc0OTc5NjA1ODAxIn0.Fu4XewTBpV0iQys2ztQcAO4JxePrw9OblI8XS3LOSe8",
    "sid":"7"
     
}
返回
{
    "code": 0,
    "data": {
        "InNumMonth": 1,
        "OutNumMonth": 0,
        "InNumToday": 1,
        "OutNumToday": 0
    }
}
```

##### 进出维修间车次数据
```

/v5/vehicle_entrance/get_repair_num
参数
{
	 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI5ODY1Njc0LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI5ODIyNDc0LCJzaWQiOiIxNTI5ODIyNDc0OTc5NjA1ODAxIn0.Fu4XewTBpV0iQys2ztQcAO4JxePrw9OblI8XS3LOSe8",
    "sid":"7"
     
}
返回
{
    "code": 0,
    "data": {
        "InRepairNumMonth": 1,
        "OutRepairNumMonth": 0,
        "InRepairNumToday": 1,
        "OutRepairNumToday": 0
    }
}
```

##### 进出店铺列表
```
v5/vehicle_entrance/get_entrance_list
参数
{
	 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI5ODY1Njc0LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI5ODIyNDc0LCJzaWQiOiIxNTI5ODIyNDc0OTc5NjA1ODAxIn0.Fu4XewTBpV0iQys2ztQcAO4JxePrw9OblI8XS3LOSe8",
    "sid":"7",
    "day_start": "2017-12-24",
    "day_end": "",
    "start": "0",
    "num": "10",
    "type": "1" // 0：进 1:出
     
}
返回
{
    "code": 0,
    "data": {
        "Total": 4,
        "List": [
            {
                "Id": 1064,
                "ShopId": 7,
                "DeviceId": 6,
                "Pos": "门口",
                "Type": 1,
                "CarNo": "鲁B58Q17",
                "Image": "https://s4s-imges.oss-cn-hangzhou.aliyuncs.com/vehicle_entrance_record/7/61161106162528_1.jpg",
                "UserType": 2,
                "CarType": "",
                "OrderId": 0,
                "MarkLeft": 0,
                "Forbid": 0,
                "Desc": "",
                "CreateTime": "2018-01-13 17:24:36",
                "ParkingFee": 0,
                "ParkingTime": 0,
                "InTime": "",
                "InEntranceId": 0,
                "OutTime": "",
                "OutEntranceId": 0,
                "ForbidMask": 0,
                "RepairType": 0
            }
        ]
    }
}
```

##### 进出维修间列表
```
/v5/vehicle_entrance/get_repair_list
参数
{
	 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI5ODY1Njc0LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI5ODIyNDc0LCJzaWQiOiIxNTI5ODIyNDc0OTc5NjA1ODAxIn0.Fu4XewTBpV0iQys2ztQcAO4JxePrw9OblI8XS3LOSe8",
    "sid":"7",
    "day_start": "2017-12-24",
    "day_end": "",
    "start": "0",
    "num": "10",
    "type": "1" // 1：进 2:出 0:全部
      
}
返回
{
    "code": 0,
    "data": {
        "Total": 4,
        "List": [
            {
                "Id": 1064,
                "ShopId": 7,
                "DeviceId": 6,
                "Pos": "门口",
                "Type": 1,
                "CarNo": "鲁B58Q17",
                "Image": "https://s4s-imges.oss-cn-hangzhou.aliyuncs.com/vehicle_entrance_record/7/61161106162528_1.jpg",
                "UserType": 2,
                "CarType": "",
                "OrderId": 0,
                "MarkLeft": 0,
                "Forbid": 0,
                "Desc": "",
                "CreateTime": "2018-01-13 17:24:36",
                "ParkingFee": 0,
                "ParkingTime": 0,
                "InTime": "",
                "InEntranceId": 0,
                "OutTime": "",
                "OutEntranceId": 0,
                "ForbidMask": 0,
                "RepairType": 2
            }
        ]
    }
}
```

##### 当然不同类型车进店流量

```
/v5/vehicle_entrance/get_entrance_num_by_type
参数
{
	 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI5OTQxMzI4LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI5ODk4MTI4LCJzaWQiOiIxNTI5ODk4MTI4NTYyNTE1NjA3In0.M3XX-87CVNCB48GyXAFg7RTfC3no4ElmAlTTGj3PFzI",
    "sid":"7",
    "day": "2017-05-22",
    "types": "0|1",
    "entrance": "1"  //1:进店  2:离店
}
返回
{
    "code": 0,
    "data": {
        "List": [
            {
                "Type": 0,
                "List": [
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ]
            },
            {
                "Type": 1,
                "List": [
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ]
            }
        ]
    }
}
```

#### 停车收费

##### 导出停车收费报表

```
/v5/vehicle_entrance/parking/records_xlsx
参数
{
	 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI5NTE3OTkwLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI5NDc0NzkwLCJzaWQiOiIxNTI5NDc0NzkwMTE5NjUzMDI3In0.wxHzD05O7rOH5an0Q_R1lgnatV-gGKbOfbzT3MR3K_Q",
     "sid": "7",
    "date_start": "1901-09-09",
    "dateEnd":"2018-06-18"
}
```

#### 人员角色权限界面

##### 1.获取模块角色列表

    /v5/shop/get_roles
    参数
    {
		"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4MzgzNjQxLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4MzQwNDQxLCJzaWQiOiIxNTI4MzQwNDQxNjM0MDc2MDAwIn0.uPrWb_47WrSjoLKKGmqOJl5tSy4rcb5hCt2l2IrblsM",
		"sid": "7",
		"module_id":"5", //5是进出门模块id
		"is_include_users": "false" //是否顺带相应返回用户列表
	}
	返回
	{
	    "code": 0,
	    "data": {
	        "roles": [
		           {
	                "Id": 1194,
	                "ShopId": 125,
	                "ModuleId": 5,
	                "Name": "laogandie",
	                "Premissions": "11|12",
	                "CreateTime": "2018-06-11 13:53:19",
	                "CreatorId": 5148,
	                "RoleLevel": 2,
	                "EntranceTags": "洗车|保养"
	            }
		    ]
		 }
	}
##### 2.获取角色详情

    /v5/shop/get_role_by_id
    参数
    {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4NzMyNjYwLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4Njg5NDYwLCJzaWQiOiIxNTI4Njg5NDYwMzY4NDQzMzE4In0.nj41oLmtHy150zEcIi2e5Iq6TAAqjnallRX-v6iVJxs",
		 "id": "1186",
		 "is_include_users": "true" 
	 }
	 返回
	 {
	    "code": 0,
	    "data": {
	        "role": {
	            "Id": 1186,
	            "ShopId": 125,
	            "ModuleId": 5,
	            "Name": "laogandie",
	            "Premissions": "11|12",
	            "CreateTime": "2018-06-11 13:23:16",
	            "CreatorId": 5148,
	            "RoleLevel": 2,
	            "EntranceTags": "保养|ho|pai"
	            "ShopUsers": [
	                {
	                    "Id": 31556,
	                    "ShopId": 125,
	                    "UserId": 6767,
	                    "Premission": "11|12",
	                    "Status": 0,
	                    "Services": "",
	                    "IsAdmin": false,
	                    "Position": "",
	                    "Activated": false,
	                    "Password": "",
	                    "Config": "",
	                    "JobNum": "",
	                    "RetireTime": "",
	                    "GroupUserId": 0,
	                    "ShopSetId": 0,
	                    "ShopSet": null
	                }
	            ]
	        }
	    }
	}

##### 3.获取模块权限列表（进发放出门单，导出表单，进出门配置）

    /v5/shop/get_permissions_by_module
    参数
    {
		"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4MzgzNjQxLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4MzQwNDQxLCJzaWQiOiIxNTI4MzQwNDQxNjM0MDc2MDAwIn0.uPrWb_47WrSjoLKKGmqOJl5tSy4rcb5hCt2l2IrblsM",
		"sid": "7",
		"module_id":"5" //5是进出门模块id
	}
##### 4.添加角色
	

    /v5/shop/create_role
    参数
    {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4NzMyNjYwLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4Njg5NDYwLCJzaWQiOiIxNTI4Njg5NDYwMzY4NDQzMzE4In0.nj41oLmtHy150zEcIi2e5Iq6TAAqjnallRX-v6iVJxs",
	    "name": "laogandie",
	    "permissions": "12|13|11",
	    "shop_user_ids": "",
	    "role_level": "2",
	    "entrance_tags": "洗车|保养",
	    "sid": "125",
	    "mid": "5"
	 }

##### 5.删除角色
	

    /v5/shop/delete_role
    参数
    {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4NzMyNjYwLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4Njg5NDYwLCJzaWQiOiIxNTI4Njg5NDYwMzY4NDQzMzE4In0.nj41oLmtHy150zEcIi2e5Iq6TAAqjnallRX-v6iVJxs",
	    "id": "1196"
	 }

##### 6.修改角色
	
    /v5/shop/update_role
    参数
    {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4NzMyNjYwLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4Njg5NDYwLCJzaWQiOiIxNTI4Njg5NDYwMzY4NDQzMzE4In0.nj41oLmtHy150zEcIi2e5Iq6TAAqjnallRX-v6iVJxs",
		    "name": "hehhe",
		    "permissions": "12|13|11",
		    "shop_user_ids": "",
		    "role_level": "2",
		    "entrance_tags": "保养|ho|pai",
		    "sid": "125",
		    "mid": "5",
		    "id": "1209"
	 }
	



### 出门单接口

#### 获取进出门历史
##### 1.正常接口

    /v5/vehicle_entrance/get_entrance_list
    参数
    {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4OTAxMjAyLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4ODU4MDAyLCJzaWQiOiIxNTI4ODU4MDAyMjU4MzkyMjg5In0.65V1SZEQbJ-SCz-gkatYPtLIHE3BB9-BXpAeZQeLV20",
		"sid": "7",
	    "num":"10",
	    "type": "2",
	    "start":"0",
	    "start_time": "1901-09-09 00:00:00",
	    "end_time":"2018-06-18 01:01:01"
	 }
	 
##### 2.导出接口 

    /v5/vehicle_entrance/export_entrance_list_xlsx
    参数
    {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4OTAxMjAyLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4ODU4MDAyLCJzaWQiOiIxNTI4ODU4MDAyMjU4MzkyMjg5In0.65V1SZEQbJ-SCz-gkatYPtLIHE3BB9-BXpAeZQeLV20",
		"sid": "7",
	    "num":"10",
	    "type": "2",
	    "start":"0",
	    "start_time": "1901-09-09 00:00:00",
	    "end_time":"2018-06-18 01:01:01"
	 }

#### 获取出门列表

##### 1.正常接口
    /v5/passcard/shop_list
    参数
    {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4MzgzNjQxLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4MzQwNDQxLCJzaWQiOiIxNTI4MzQwNDQxNjM0MDc2MDAwIn0.uPrWb_47WrSjoLKKGmqOJl5tSy4rcb5hCt2l2IrblsM",
		"car_type":"",	
		"num":"10",
		"sid":"7",
		"start":"0",
		"in_shop":"1",
		"day": "",
		"eday":""
	 }
	 返回
	 {
	    "code": 0,
	    "data": [
	        {
	            "Id": 1151,
	            "ShopId": 7,
	            "UserId": 0,
	            "VerifyUserId": 1068,
	            "No": 1,
	            "Info": "浙A12345",
	            "Desc": "",
	            "Service": "保养",
	            "OrderId": 0,
	            "StartTime": "2018-05-31 11:24:38",
	            "EndTime": "2018-05-31 12:24:38",
	            "Status": 5,
	            "CreateTime": "2018-05-31 11:24:38",
	            "VerifyTime": "2018-05-31 11:24:38",
	            "Data": {
	                "verify_user": "潘逸杰"
	            }
	        }
		]
	}

##### 2.导出列表接口

    /v5/passcard/shop_list_xlsx
    参数
     {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4MzgzNjQxLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4MzQwNDQxLCJzaWQiOiIxNTI4MzQwNDQxNjM0MDc2MDAwIn0.uPrWb_47WrSjoLKKGmqOJl5tSy4rcb5hCt2l2IrblsM",
		"car_type":"",	
		"num":"10",
		"sid":"7",
		"start":"0",
		"in_shop":"1",
		"day": "",
		"eday":""
	 }
    
	
#### 获取内部通行卡列表

##### 1. 正常接口
    "/v5/passcard/inner_pass_card_list"
    参数
    {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4MzgzNjQxLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4MzQwNDQxLCJzaWQiOiIxNTI4MzQwNDQxNjM0MDc2MDAwIn0.uPrWb_47WrSjoLKKGmqOJl5tSy4rcb5hCt2l2IrblsM",
	    "car_type":"",  
	    "num":"10",
	    "sid":"7",
	    "start":"0",
	    "in_shop":"1",
	    "day": "1900-01-02",
	    "eday":"2018-09-09"
	 
	 }
	 返回
	 {
	    "code": 0,
	    "data": [
	        {
	            "Id": 22,
	            "ShopId": 7,
	            "UserId": 1070,
	            "VerifyUserId": 1120,
	            "Info": "12",
	            "Desc": "",
	            "Service": "",
	            "StartTime": "2017-12-19 17:08:25",
	            "EndTime": "2018-12-19 17:08:25",
	            "Status": 1,
	            "CreateTime": "2017-12-19 17:08:25",
	            "Data": {
	                "user": "戴润生",
	                "verify_user": ""
	            }
	        }
	     ]
	  }

##### 2.导出接口

    "/v5/passcard/inner_pass_card_list_xlsx"
    参数
    {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4MzgzNjQxLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4MzQwNDQxLCJzaWQiOiIxNTI4MzQwNDQxNjM0MDc2MDAwIn0.uPrWb_47WrSjoLKKGmqOJl5tSy4rcb5hCt2l2IrblsM",
	    "car_type":"",  
	    "num":"10",
	    "sid":"7",
	    "start":"0",
	    "in_shop":"1",
	    "day": "1900-01-02",
	    "eday":"2018-09-09"
	 
	 }
     
#### 获取出门单详情
```
v5/passcard/get_pass_card_detail
参数
{
	"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTMwMTk0MDkxLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTMwMTUwODkxLCJzaWQiOiIxNTMwMTUwODkxNzE3OTE1MDAzIn0.KXAsmDaONiiRO0L69LGppf2RQJU90qfytR9AmsOA8DA",
	"pc_id": "1"
}
返回
{
    "code": 0,
    "data": {
        "Id": 1,
        "ShopId": 7,
        "UserId": 5000033,
        "VerifyUserId": 806,
        "VerifyUserName": "",
        "No": 1,
        "Info": "皖K12345",
        "Desc": "",
        "Service": "",
        "OrderId": 0,
        "StartTime": "2016-12-05 17:15:51",
        "EndTime": "2016-12-06 05:15:51",
        "Status": 5,
        "CreateTime": "2016-11-30 16:51:59",
        "VerifyTime": "2016-11-30 17:15:51"
    }
}
```

#### 撤销出门单
```
/v5/passcard/cancel_pass_card
参数
{
	"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTMwMTk0MDkxLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTMwMTUwODkxLCJzaWQiOiIxNTMwMTUwODkxNzE3OTE1MDAzIn0.KXAsmDaONiiRO0L69LGppf2RQJU90qfytR9AmsOA8DA",
	"sid": "7",
	"pcid": "1",
}
返回
{
    "code": 0,
    "data": "OK"
}
```

#### 确认出门单

```
/v5/passcard/verify
参数
{
"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTMwMTk0MDkxLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTMwMTUwODkxLCJzaWQiOiIxNTMwMTUwODkxNzE3OTE1MDAzIn0.KXAsmDaONiiRO0L69LGppf2RQJU90qfytR9AmsOA8DA",
	"sid": "7",
	"pcid": "1",
    "status": "1",  1:同意 。3拒绝
    "svc": "",
    "desc": "",
    "end_time": ""
}
```

### 车辆管理

#### 添加车辆

    /v5/vehicle_entrance/add_staff
    参数
    {
		"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4MzgzNjQxLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4MzQwNDQxLCJzaWQiOiIxNTI4MzQwNDQxNjM0MDc2MDAwIn0.uPrWb_47WrSjoLKKGmqOJl5tSy4rcb5hCt2l2IrblsM",
		 "sid":"7",  
		 "user_name":"helo",
		 "car_no":"浙A28733",
		 "class_no": "1",
		 "car_type": "员工",  //old
		 "inner_car": "1",
		 "desc": "helo",
         "in_shop": "0"  //0:在店  1:离店
         "car_type_id": "1"    //new
	 }
	 返回
	 {
	    "code": 0,
	    "data": {
	        "Id": 140,
	        "ShopId": 7,
	        "ShusrId": 5148,
	        "InnerCar": 1,
	        "UserName": "helo",
	        "CarNo": "浙A28733",
	        "ClassNo": "1",
	        "CarType": "员工",
	        "Desc": "helo",
	        "CreateTime": "2018-06-07 21:57:22",
	        "Status": 0,
	        "Data": null
	    }
	}
#### 修改车辆

    /v5/vehicle_entrance/update_staff
    参数
    {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4NDY1OTQ4LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4NDIyNzQ4LCJzaWQiOiIxNTI4NDIyNzQ4ODI4MjcxMDAwIn0.x3Vwh0m1vVp1fC02Zq2_5B42Jy3DV8eOKfYwDpdcAR4",
	    "sid": "7",
	    "id": "1",
	    "user_name": "laowang",
	    "car_no": "jsdifje",
	    "class_no": "5",
	    "car_type":"car_t",
	    "desc":"dawangwang",
	    "inner_car": "1",
        "car_type_id": "1"  // 0代表无
	 }
	返回
	{
	    "code": 0,
	    "data": "Ok"
	}

#### 删除车辆

    /v5/vehicle_entrance/delete_staff
    参数
    {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4NDY1OTQ4LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4NDIyNzQ4LCJzaWQiOiIxNTI4NDIyNzQ4ODI4MjcxMDAwIn0.x3Vwh0m1vVp1fC02Zq2_5B42Jy3DV8eOKfYwDpdcAR4",
	    "sid": "7",
	    "id": "1",
	 }
	返回
	{
	    "code": 0,
	    "data": "Ok"
	}

#### 获取车辆列表

    /v5/vehicle_entrance/get_staff_list
    参数
    {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4MzgzNjQxLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4MzQwNDQxLCJzaWQiOiIxNTI4MzQwNDQxNjM0MDc2MDAwIn0.uPrWb_47WrSjoLKKGmqOJl5tSy4rcb5hCt2l2IrblsM",
	     "sid":"7",  
		 "start": "0",
		 "num": "10",
         "car_no": "浙a12345"
         "in_shop": "1",
         "car_type_id": "1" //0:代表全部类型 
	 }
	 返回
	 {
	    "code": 0,
	    "data": [
	        {
	            "Id": 102,
	            "ShopId": 7,
	            "ShusrId": 1098,
	            "InnerCar": 0,
	            "UserName": "小林",
	            "CarNo": "苏A77777",
	            "ClassNo": "",
	            "CarType": "员工",
	            "Desc": "",
	            "CreateTime": "2017-12-05 19:03:37",
	            "Status": 0,
	            "Data": {
	                "InShop": 1,
                    "LeaveTime": "2017-12-05 19:03:37"
	            }
	        }
	     ]
	  }


### 车辆类型设置
#### 新增车辆类型

    /v5/passcard/add_shop_car_type
    参数
    {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4NDY1OTQ4LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4NDIyNzQ4LCJzaWQiOiIxNTI4NDIyNzQ4ODI4MjcxMDAwIn0.x3Vwh0m1vVp1fC02Zq2_5B42Jy3DV8eOKfYwDpdcAR4",
	    "sid": "7",
	    "type_name": "垃圾车",
	    "tag": "运垃圾"
	 }
	 返回
	 {
	    "code": 0,
	    "data": {
	        "Id": 1,
	        "ShopId": 7,
	        "Tag": "运垃圾",
	        "TypeName": "垃圾车",
	        "CreateTime": "2018-06-08 14:51:56"
	    }
	}

#### 获取车辆类型列表

    /v5/passcard/get_shop_car_type_list
    参数
    {
	    "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4NDY1OTQ4LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4NDIyNzQ4LCJzaWQiOiIxNTI4NDIyNzQ4ODI4MjcxMDAwIn0.x3Vwh0m1vVp1fC02Zq2_5B42Jy3DV8eOKfYwDpdcAR4",
	    "sid": "7"
	}

#### 获取车辆类型标签

    /v5/shop/get_release_tags
    参数
    {
	    "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4NDY1OTQ4LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4NDIyNzQ4LCJzaWQiOiIxNTI4NDIyNzQ4ODI4MjcxMDAwIn0.x3Vwh0m1vVp1fC02Zq2_5B42Jy3DV8eOKfYwDpdcAR4",
	    "sid": "7"
	}
    返回
    {
    "code": 0,
    "data": [
        "",
        "heki",
        "helo",
        "lala",
        "motor",
        "保养",
        "出门",
        "员工",
        "呵呵",
        "哈哈",
        "洗车",
        "维修"
    ]
}

#### 添加标签

    /v5/shop/add_release_tag
    参数
 	 {
        "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTMxOTIzNzc3LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTMxODgwNTc3LCJzaWQiOiIxNTMxODgwNTc3MzQzNTA4NjM1In0.rYDnxDzImSbecKujPahFvRlbzLeYZw8dwYHQbX0ovTw",
         "sid":"7",
        "tag": "heo sdfefote"
    }
	
    返回
    {
        "code": 90028,
        "msg": "标签已存在"
    }

#### 删除标签

    /v5/shop/delete_release_tag
    参数
 	 {
        "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTMxOTIzNzc3LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTMxODgwNTc3LCJzaWQiOiIxNTMxODgwNTc3MzQzNTA4NjM1In0.rYDnxDzImSbecKujPahFvRlbzLeYZw8dwYHQbX0ovTw",
         "sid":"7",
        "tag": "heo sdfefote"
    }
	
    返回
    {
        "code": 0,
        "data": "ww使用该标签"
	}

#### 修改车辆类型

    /v5/passcard/update_shop_car_type
    参数
    {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4NDY1OTQ4LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4NDIyNzQ4LCJzaWQiOiIxNTI4NDIyNzQ4ODI4MjcxMDAwIn0.x3Vwh0m1vVp1fC02Zq2_5B42Jy3DV8eOKfYwDpdcAR4",
	    "id": "1",
	    "tag": "lala|heki",
	    "type_name":"keyun"
	 }
	 返回
	 {
	    "code": 0,
	    "data": {
	        "Id": 1,
	        "ShopId": 0,
	        "Tag": "lala|heki",
	        "TypeName": "keyun",
	        "CreateTime": ""
	    }
	}


#### 删除车辆类型

    /v5/passcard/delete_shop_car_type
    参数
    {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4NDY1OTQ4LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4NDIyNzQ4LCJzaWQiOiIxNTI4NDIyNzQ4ODI4MjcxMDAwIn0.x3Vwh0m1vVp1fC02Zq2_5B42Jy3DV8eOKfYwDpdcAR4",
	    "id": "2"
	    
	 }
	 返回
	 {
	    "code": 0,
	    "data": "Ok"
	}

#### 获取店铺车辆类型列表及相应车辆数量

    /v5/passcard/get_shop_car_type_list
    参数
    {
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI4NTYwMjI1LCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI4NTE3MDI1LCJzaWQiOiIxNTI4NTE3MDI1MTY3NTU4MDAwIn0.30LeHiXoa7ju1pqI7wFuH39kdDflEwjQXlsHW0mq6JY",
	    "sid": "7"
	    
	 }
	 返回
	 {
	    "code": 0,
	    "data": [
	        {
	            "Id": 1,
	            "ShopId": 7,
	            "Tag": "lala|heki",
	            "TypeName": "员工",
	            "CreateTime": "2018-06-08 14:51:56",
	            "Data": {
	                "num": 4
	            }
	        },
	        {
	            "Id": 2,
	            "ShopId": 7,
	            "Tag": "helo",
	            "TypeName": "垃圾车",
	            "CreateTime": "2018-06-08 19:40:56",
	            "Data": {
	                "num": 0
	            }
	        }
	    ]
	}
    
### 出门单

#### 发放出门单
> 添加type：8 // 同步出门单

    /v5/passcard/send_by_car_no
	{
		 "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJzNHN5dW5fd2ViIiwiZXhwIjoxNTI5MDc0OTgwLCJqdGkiOiI1MTQ4IiwibmJmIjoxNTI5MDMxNzgwLCJzaWQiOiIxNTI5MDMxNzgwNTg3MzAzNjU4In0.aUWmsRXABnFF4LIFViFDWRPsdkHj2KXMQKx6F6d1WZU",
	     "sid": "7",
	     "user_id": "5148",
	     "car_no": "浙A12389",
	     "service": "洗车",
	     "desc": "哈哈哈哈",
	     "end_time": ""
	}

### 摄像头接口

#### poll接口

    192.168.18.168:8193/v2/Poll
    参数
    {
	 "MsgID":1529048251,
	 "Time":1529048251,
	 "Code":"3119315232243872",
	 "DeviceID":"2M04895YAJ00003"
	 }
	 返回
	 {
	    "code": 0,
	    "data": [
	        {
	            "Type": 8,
	            "MsgID": 1529048537,
	            "Data": {
	                "CreateTime": "2018-06-15 15:42:16",
	                "Desc": "哈哈哈哈",
	                "EndTime": "2018-06-15 16:42:16",
	                "Id": 1174,
	                "Info": "浙A12300",
	                "No": 3,
	                "OrderId": 0,
	                "Service": "洗车",
	                "ShopId": 7,
	                "StartTime": "2018-06-15 15:42:16",
	                "Status": 1,
	                "UserId": 2111,
	                "VerifyTime": "2018-06-15 15:42:16",
	                "VerifyUserId": 5148
	            }
	        }
	    ]
	}


#### 添加进出门记录

    /v2/AddEntranceRecord
    
  修改内容：
  1. 删除逻辑判断
  2. 保留相应的表更新
- entrance_record（必须添加）
- car_in_shop（必须添加）
- release_record（存在预约之类的请求时）


